<?php
/**
 * @file
 * .module file of Tripal BLAST.
 */

use Drupal\Core\Url;

/**
 * Implements hook_theme().
 * Used by Tripal BLAST UI page.
 *
 * @see templates in /templates
 */
function tripal_blast_theme($existing, $type, $theme, $path) {  
  // Links rendered as a markup for the template file.
  // Query type + programs route.
  $blast_programs = [
    'blastn'  => ['nucleotide', 'nucleotide'],
    'blastx'  => ['nucleotide', 'protein'],
    'tblastn' => ['protein', 'nucleotide'],
    'blastp'  => ['protein', 'protein']
  ];
  $route_ui = 'tripal_blast.blast_program';
  $links_ui = [];

  foreach($blast_programs as $name => $param) {
    list($query, $db) = $param;
    $link = Url::fromRoute($route_ui, ['query' => $query, 'db' => $db]);
    $links_ui[ 'link_' . $name ] = \Drupal::l(t($name), $link);
  } 

  
  
  $context_links = [
    // MISC/ADMIN. 
    'link_config' => '#',
    'link_jobs'    => '#',
    'link_nodeadd'  => '#',
    'link_dbadd'     => '#',
    'link_dbfields'   => '#',
  ];

  // Pass rendered links as variables and make available in the template file.
  $variables = [
    // Tripal BLAST UI page.
    'theme-tripal-blast-ui' => [
      'variables' => ['context_links' => $links_ui],
      'template'  => 'template-tripal-blast-ui',
    ],
    // Tripal BLAST Configuration page.
    // Tripal BLAST Help page.
    'theme-tripal-blast-help' => [
      'variables' => ['context_links' => $context_links],
      'template'  => 'template-tripal-blast-help',
    ],
  ];

  return $variables;
}